user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

load_module modules/ngx_http_block_legacy_module.so;

events {
    worker_connections  1024;
}

http {
   block_legacy_http on;

   server {
       listen 80;
       server_name example.com;

       location / {
           return 200 "Default: HTTP/1.1+ allowed\n";
       }

       location /strict {
           block_http11 on;
           return 200 "Strict: HTTP/2+ only\n";
       }

       location /legacy {
           block_legacy_http off;
           return 200 "Legacy: all protocols allowed\n";
       }

       location /no-http10 {
           block_http10 on;
           block_http11 off;
           return 200 "No HTTP/1.0, but HTTP/1.1+ ok\n";
       }
   }
}
